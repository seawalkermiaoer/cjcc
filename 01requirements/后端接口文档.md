# 接口文档：获取故事详情

## 接口描述
该接口用于从 Supabase 数据库获取指定 ID 的互动故事详细内容。

## 请求方式
SUPABASE REST API

## 请求 URL
```
https://[supabase_url]/rest/v1/story_details
```

## 请求参数

| 参数名 | 类型 | 必填 | 描述 |
| ------ | ---- | ---- | ---- |
| id | String | 是 | 故事的唯一标识符 |

## 请求示例
```javascript
const { data, error } = await supabase
  .from('story_details')
  .select('*')
  .eq('id', storyId)
  .single()
```

## 响应参数

| 参数名 | 类型 | 描述 |
| ------ | ---- | ---- |
| id | String | 故事的唯一标识符 |
| title | String | 故事标题 |
| story | jsonb | 故事内容，包含多个场景节点 |
| gameover | jsonb | 游戏结束标题（可选） |

### story 数组中的场景节点结构

| 参数名 | 类型 | 描述 |
| ------ | ---- | ---- |
| chapter | String | 章节标题（可选） |
| gameover | String | 结局标题（可选，与 chapter 互斥） |
| text | String | 场景文本内容 |
| image | String | 场景图片 URL（可选） |
| choices | Array | 选择项数组（可选） |

### choices 数组中的选择项结构

| 参数名 | 类型 | 描述 |
| ------ | ---- | ---- |
| text | String | 选择项文本 |
| consequence | String/Number | 选择后果，可以是场景索引、场景名称或特殊指令（如 'gameover'） |

## 响应示例

```json
{
    "id": "meng_mu_san_qian",
    "story": [
        {
            "text": "战国时代，邹邑城外。你，孟母仉氏，正坐在织机前，但你的心却无法平静。三岁的儿子孟轲，就在院前模仿着百步之外墓地里送葬的队伍，学着那些人捶胸顿足、哭号哀乐。他聪明过人，能惟妙惟肖地复刻所见的一切。但眼前的景象让你心忧如焚，这阴郁哀伤的环境，正在塑造他的童年。你喃喃自语：“此非吾所以居处子也。”",
            "image": "",
            "chapter": "第一章：墓地旁的隐忧",
            "choices": [
                {
                    "text": "为了孩子的将来，必须搬家。",
                    "consequence": 1
                }
            ]
        },
        {
            "text": "你变卖了部分家产，带着孟轲搬到了市集旁。这里没有了哀乐，却充满了喧嚣。孟轲很快又有了新的模仿对象。他学着小贩吆喝叫卖，模仿屠夫的手起刀落，眼神里多了几分市侩的精明，却少了孩童的纯真。这并不是你期望他成为的样子。你看着他，内心无比挣扎，这市井的铜臭气同样会侵蚀他纯良的心性。",
            "image": "",
            "chapter": "第二章：市集边的烦恼",
            "choices": [
                {
                    "text": "这里还是不适合孩子，必须再次搬迁。",
                    "consequence": 2
                },
                {
                    "text": "或许接触三教九流对他成长也有好处。",
                    "consequence": "gameOver_market"
                }
            ]
        },
        {
            "text": "经过多方打听，你毅然决然地第三次搬家，这次的目的地是邹邑的学宫附近。这里环境清幽，没有了墓地的悲戚和市井的嘈杂，取而代之的是朗朗的读书声和学子们彬彬有礼的揖让之声。你的心终于安定下来了。",
            "image": "",
            "chapter": "第三章：学宫旁的新生",
            "choices": [
                {
                    "text": "观察孟轲的反应",
                    "consequence": 3
                }
            ]
        },
        {
            "text": "你的选择是无比正确的。孟轲不再模仿他人，而是每天清晨都跑到学宫外，学着学子们的样子恭敬行礼，对那些竹简上的文字产生了浓厚的兴趣。他的眼神变得清澈，充满求知欲。你看到孔子的孙子，学宫里的夫子，也向孟轲投来了赞许的目光。你欣慰地笑了：“真可以居吾子矣。”",
            "image": "",
            "chapter": "第三章：学宫旁的新生",
            "choices": [
                {
                    "text": "继续见证他的成长",
                    "consequence": 4
                }
            ]
        },
        {
            "text": "时光飞逝，在学宫的礼乐熏陶下，孟轲勤奋好学，终成大器，成为了儒家学派的集大成者，被后世尊为“亚圣”。[1] 你的三次迁徙，不仅仅是为他寻找一个安身之所，更是为他构建了一个纯净的精神世界。你的远见与坚毅，成就了一代圣贤，也为后世留下了“孟母三迁”的千古佳话。 [1, 5, 6]",
            "image": "",
            "chapter": "尾声：亚圣的诞生",
            "choices": [
                {
                    "text": "从头再来",
                    "consequence": 0
                }
            ]
        }
    ],
    "gameover": {
        "gameOver_market": {
            "text": "你选择了留在市集。孟轲虽然变得精明能干，善于言辞，但最终成为了一名成功的商人，他身上的儒雅之气和圣贤之道却与他擦肩而过。环境塑造了人，你的选择决定了他的另一种人生。",
            "image": "",
            "chapter": "游戏结束",
            "choices": [
                {
                    "text": "重新开始",
                    "consequence": 0
                }
            ]
        }
    },
    "created_at": "2025-08-09T13:17:59.899935+00:00",
    "updated_at": "2025-08-09T13:17:59.899935+00:00",
    "title": "孟母三迁"
}    

```

## 错误码

| 错误码 | 描述 |
| ------ | ---- |
| 404 | 未找到指定 ID 的故事 |
| 500 | 服务器内部错误 |

## 注意事项
1. 接口使用 Supabase 的 `.single()` 方法，确保只返回一条记录
2. 如果未找到故事数据，将抛出错误
3. 故事场景可以通过数字索引或特定的场景名称（chapter/gameover）进行跳转

